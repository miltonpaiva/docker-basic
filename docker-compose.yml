version: '3.1'
services:
    #configuração do webserver ngix
    # volumes: - '/origem:/destino'
    webserver:
        image: 'nginx:alpine'
        working_dir: /application
        volumes:
            - '.:/application'
            - './nginx.conf:/etc/nginx/conf.d/default.conf'
        ports:
            - '8080:80'

    php-fpm:
        build: .
        working_dir: /application
        volumes:
            - '.:/application'
            - './php-ini-overrides.ini:/etc/php/8.2/fpm/conf.d/99-overrides.ini'
    db:
      image: mysql:5.7
      restart: always
      environment:
        MYSQL_DATABASE: 'db'
        # So you don't have to use root, but you can if you like
        MYSQL_USER: 'miltonpaiva'
        # You can use whatever password you like
        MYSQL_PASSWORD: 'senha'
        # Password for root access
        MYSQL_ROOT_PASSWORD: 'senha_root'
      ports:
        # <Port exposed> : < MySQL Port running inside container>
        - '3306:3306'
      expose:
        # Opens port 3306 on the container
        - '3306'
        # Where our data will be persisted
      volumes:
        - my-db:/var/lib/mysql
  # Names our volume
volumes:
  my-db:
